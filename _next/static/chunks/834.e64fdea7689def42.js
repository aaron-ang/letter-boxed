"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[834],{4834:(e,n,t)=>{t.r(n),t.d(n,{default:()=>q});var s=t(8081),l=t(2242),r=t(5454),i=t(7357),a=t(8642),o=t(8667),c=t(5027),d=t(2340),u=t(5688),h=t(8392),x=t(428),p=t(1208);let g=()=>(0,s.jsx)(r.A,{sx:{flexGrow:1},children:(0,s.jsx)(c.A,{position:"static",children:(0,s.jsxs)(d.A,{children:[(0,s.jsx)(x.A,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},onClick:()=>window.location.href="https://github.com/aaron-ang/letter-boxed",children:(0,s.jsx)(p.A,{})}),(0,s.jsx)(u.A,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Letter Boxed"}),(0,s.jsx)(h.A,{color:"inherit",onClick:()=>window.open("https://forms.gle/fVdX9G4wSNjPkMTA7"),children:"Feedback"})]})})});var j=t(2149),f=t(3262),A=t(9853),m=t(8148);let y={inputMode:"text",pattern:"[a-zA-Z]+",maxLength:1,style:{textAlign:"center"},"aria-label":"input"},v=e=>{if(-1===e)return;let n=50+Math.min(30,2.5*e);return`hsl(${170+5.833333333333333*e}, 90%, ${n}%)`},w=j.forwardRef((e,n)=>{let{idx:t,value:l,onChange:r,onKeyDown:i,sequencePosition:a,disabled:o}=e,c={width:"4em","& .MuiInputBase-root":{backgroundColor:v(a),transition:"background-color 0.3s ease"}};return(0,s.jsx)(m.A,{sx:c,name:t,ref:e=>{n&&"current"in n&&n.current&&(n.current[parseInt(t)]=e)},value:l,onChange:r,onKeyDown:i,disabled:o,slotProps:{htmlInput:y}})}),b=e=>{let{fields:n,handleInputChange:t,handleBackspace:l,focusFields:r,disabledFields:i,inputRefs:a,solving:o,generateRandom:c}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.A,{direction:"row",spacing:2,children:Object.entries(n).slice(0,3).map(e=>{let[n,o]=e;return(0,s.jsx)(w,{idx:n,ref:a,value:o,onChange:t,onKeyDown:l,sequencePosition:r[parseInt(n)],disabled:i[parseInt(n)]},n)})}),(0,s.jsxs)(A.A,{container:!0,justifyContent:"center",children:[(0,s.jsx)(A.A,{children:(0,s.jsx)(f.A,{direction:"column",spacing:2,children:Object.entries(n).slice(3,6).map(e=>{let[n,o]=e;return(0,s.jsx)(w,{idx:n,ref:a,value:o,onChange:t,onKeyDown:l,sequencePosition:r[parseInt(n)],disabled:i[parseInt(n)]},n)})})}),(0,s.jsx)(A.A,{children:(0,s.jsxs)(f.A,{direction:"column",spacing:5,m:5,children:[(0,s.jsx)(h.A,{variant:"outlined",color:"secondary",disabled:o,onClick:c,children:"Random Puzzle"}),(0,s.jsx)(h.A,{variant:"outlined",color:"secondary",onClick:()=>window.open("https://www.nytimes.com/puzzles/letter-boxed"),children:"Visit NYT Site"})]})}),(0,s.jsx)(A.A,{children:(0,s.jsx)(f.A,{direction:"column",spacing:2,children:Object.entries(n).slice(6,9).map(e=>{let[n,o]=e;return(0,s.jsx)(w,{idx:n,ref:a,value:o,onChange:t,onKeyDown:l,sequencePosition:r[parseInt(n)],disabled:i[parseInt(n)]},n)})})})]}),(0,s.jsx)(f.A,{direction:"row",spacing:2,children:Object.entries(n).slice(9).map(e=>{let[n,o]=e;return(0,s.jsx)(w,{idx:n,ref:a,value:o,onChange:t,onKeyDown:l,sequencePosition:r[parseInt(n)],disabled:i[parseInt(n)]},n)})})]})};var C=t(9501);let S=e=>{let{solving:n,solution:t,isSuccess:l,visualize:r,fieldsMatch:i,resetFields:a,handleSolve:o,findBest:c}=e;return(0,s.jsxs)(f.A,{direction:"row",spacing:2,margin:2,children:[(0,s.jsx)(h.A,{color:"error",variant:"contained",onClick:a,children:"Reset"}),0!==t.length&&l&&!r&&i?(0,s.jsx)(C.A,{loading:n,variant:"contained",onClick:c,children:"Find Best"}):(0,s.jsx)(C.A,{loading:n,variant:"contained",onClick:o,children:"Solve"})]})};var k=t(1550),I=t(7982),O=t(5034),P=t(9230),z=t(9800),D=t(3189),R=t(6505),F=t(3656);function M(e){return(0,s.jsxs)(r.A,{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",children:[(0,s.jsx)(r.A,{width:"50%",mr:1,children:(0,s.jsx)(F.A,{variant:"determinate",...e})}),(0,s.jsx)(r.A,{children:(0,s.jsx)(u.A,{variant:"body2",color:"text.secondary",children:`${Math.round(e.value)}%`})})]})}let B=e=>{let{visualize:n,delay:t,progress:l,prevProcess:i,solving:a,handleVizChange:o,handleDelayChange:c,handleSliderChange:d}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.A,{width:"50%",mr:1,children:(0,s.jsx)(D.Ay,{min:0,max:i.length-1,onChange:d,disabled:!i.length||a})}),(0,s.jsxs)(f.A,{direction:"row",spacing:2,children:[(0,s.jsx)(k.A,{disabled:a,control:(0,s.jsx)(I.A,{checked:n,onChange:o}),label:"Visualize"}),(0,s.jsxs)(z.A,{sx:{minWidth:80},disabled:!n||a,children:[(0,s.jsx)(O.A,{id:"delay-label",children:"Delay(ms)"}),(0,s.jsxs)(R.A,{value:t.toString(),labelId:"delay-label",label:"Delay(ms)",onChange:c,children:[(0,s.jsx)(P.A,{value:1,children:"1"}),(0,s.jsx)(P.A,{value:5,children:"5"}),(0,s.jsx)(P.A,{value:50,children:"50"}),(0,s.jsx)(P.A,{value:100,children:"100"})]})]})]}),(0,s.jsx)(M,{value:l})]})},E=e=>{let{solution:n,bestSolution:t,solving:l,isSuccess:r}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(A.A,{container:!0,children:[(0,s.jsxs)(A.A,{textAlign:"center",marginX:2,children:[0!==t.length&&(0,s.jsx)("h3",{children:"Initial solution:"}),n&&n.map((e,n)=>(0,s.jsx)("p",{children:e},n))]}),0!==t.length&&(0,s.jsxs)(A.A,{textAlign:"center",marginX:2,children:[(0,s.jsx)("h3",{children:"Best solution:"}),t.map((e,n)=>(0,s.jsx)("p",{children:e},n))]})]}),!l&&!r&&(0,s.jsxs)("h2",{children:["No solution found using up to ",5," words"]})]})};var N=t(3849);function q(){let{fields:e,setFields:n,solution:t,setSolution:c,visualize:d,setVisualize:u,progress:h,setProgress:x,isSuccess:p,setIsSuccess:f,delay:A,setDelay:m,prevInput:y,setPrevInput:v,prevProcess:w,setPrevProcess:C,bestSolution:k,setBestSolution:I,disabledFields:O,setDisabledFields:P,focusFields:z,setFocusFields:D,inputRefs:R,groupLetters:F,updateFocus:M,generateRandom:q}=function(){let e={...Array(12).fill("")},[n,t]=(0,j.useState)(e),[s,l]=(0,j.useState)([]),[r,i]=(0,j.useState)(!1),[a,o]=(0,j.useState)(0),[c,d]=(0,j.useState)(!0),[u,h]=(0,j.useState)(5),[x,p]=(0,j.useState)([]),[g,f]=(0,j.useState)([]),[A,m]=(0,j.useState)([]),[y,v]=(0,j.useState)([]),[w,b]=(0,j.useState)([]);return{fields:n,setFields:t,solution:s,setSolution:l,visualize:r,setVisualize:i,progress:a,setProgress:o,isSuccess:c,setIsSuccess:d,delay:u,setDelay:h,prevInput:x,setPrevInput:p,prevProcess:g,setPrevProcess:f,bestSolution:A,setBestSolution:m,disabledFields:y,setDisabledFields:v,focusFields:w,setFocusFields:b,inputRefs:(0,j.useRef)([]),groupLetters:e=>{if(Object.values(e).includes(""))throw Error("Please fill out all fields");let n=Object.values(e),t=[],s="",l=0;for(;l<n.length;){for(let e=0;e<3;e++)s+=n[l],l++;t.push(s),s=""}return t},updateFocus:(e,t)=>{let s=Object.values(n);t.fill(-1),e.flatMap(e=>[...e]).reduce((e,n)=>{if(e.processedChars.has(n)||e.positionCounter>=12)return e;let l=s.indexOf(n);return -1!==l&&(t[l]=e.positionCounter,e.processedChars.add(n),e.positionCounter++),e},{processedChars:new Set,positionCounter:0})},generateRandom:()=>{l([]),p([]),f([]),m([]),o(0),d(!0),b([]),v([]);let e=[...Array(12).keys()],n=new Set,s="EARIOTNSLCUDPMHGB";for(;n.size<e.length;)n.add(s.charAt(Math.floor(Math.random()*s.length)));let r=[...n],i={};e.forEach(e=>i[e]=r[e]),t(i)}}}(),{solving:L,setSolving:_,getSolution:T,sleep:$}=function(){let e=N.env.CLOUD_FUNCTION_URL_PROD||"http://localhost:8080/",[n,t]=(0,j.useState)(!1);return{solving:n,setSolving:t,getSolution:async function n(n,t){return(await l.A.get(e,{params:{input:n,length:t}})).data},sleep:e=>new Promise(n=>setTimeout(n,e))}}(),K=async e=>{if(x(0),d)await U(e);else{let n=e[e.length-1]??[],t=Array(12).fill(-1);M(n,t),D(t),c(n)}P([])},U=async e=>{for(let n of e){c(n),x(n=>n+1/e.length*100);let t=Array(12).fill(-1),s=Array(12).fill(!1);M(n,t),t.forEach((e,n)=>{-1===e&&(s[n]=!0)}),D(t),P(s),await $(A)}},G=async()=>{try{let n,t;c([]),I([]);let s=F(e);if(console.log(`input: ${s}`),_(!0),s.every((e,n)=>e===y[n]))n=w,t=!0;else{let e=await T(s);n=e.data,t=e.success,console.log(`response: ${t?"success":"failure"}`)}await K(n),C(n),f(t),v(s)}catch(e){l.A.isAxiosError(e)?e.response?.status===504?alert("Request timed out. Please try again."):alert(e.message):console.log(e)}finally{_(!1)}},V=async()=>{try{if(0===k.length){console.log(`Looking for the best solution of length ${t.length}...`),_(!0);let e=await T(y,t.length);I(e.data)}}catch(e){alert(e)}finally{_(!1)}},X=(0,i.A)({typography:{fontFamily:"Open Sans, sans-serif"}});X=(0,a.A)(X);let H=Object.values(e).join("")===y.join("");return(0,s.jsxs)(o.A,{theme:X,children:[(0,s.jsx)(g,{}),(0,s.jsxs)(r.A,{paddingTop:10,display:"flex",flexDirection:"column",alignItems:"center",children:[(0,s.jsx)(b,{fields:e,handleInputChange:t=>{let s=t.target.value.replace(/[^a-z]/gi,""),l=t.target.name,r=R.current[parseInt(l)+1];n({...e,[l]:s.toUpperCase()}),null!=r&&""!==s&&r.querySelector("input")?.focus()},handleBackspace:e=>{let n=e.target;if("Backspace"===e.key&&""===n.value){let e=R.current[parseInt(n.name)-1];e?.querySelector("input")?.focus()}},focusFields:z,disabledFields:O,inputRefs:R,solving:L,generateRandom:q}),(0,s.jsx)(S,{solving:L,solution:t,isSuccess:p,visualize:d,fieldsMatch:H,resetFields:()=>{location.reload()},handleSolve:G,findBest:V}),(0,s.jsx)(B,{visualize:d,delay:A,progress:h,prevProcess:w,solving:L,handleVizChange:()=>{u(e=>!e)},handleDelayChange:e=>{m(parseInt(e.target.value))},handleSliderChange:(e,n)=>{let t=w[n],s=Array(12).fill(-1),l=Array(12).fill(!1);M(t,s),s.forEach((e,n)=>{-1===e&&(l[n]=!0)}),D(s),P(l),c(t)}}),(0,s.jsx)(E,{solution:t,bestSolution:k,solving:L,isSuccess:p})]})]})}}}]);